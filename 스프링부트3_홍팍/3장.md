## 3.1 폼 데이터란

폼 데이터란 <form> 태그에 실려 전송되는 데이터

<form> 태그는 웹 브라우저에서 서버로 데이터를 전송할때 사용

<form> 태그에서 실어보낸 데이터는 서버의 컨트롤러가 DTO라는 객체에 담아 받는다

DTO로 받은 데이터는 DB에 저장된다

## 3.2 폼 데이터를 DTO 로 받기

### 3.2.1 입력 폼 만들기

src > main > resources > templates 에 articles 디렉토리 만들기

new.mustache 뷰 페이지 만들기

<form> 태그 포함한 입력 폼 만들기

```html
{{>layouts/header}}

<form action ="">
	<input type="text">
	<textarea></textarea>
	</input>
		<button type="submit">제출</button>
</form>

{{>layouts/footer}}
```

### 3.2.2 컨트롤러 만들기

src > main > java > com.example.firstproject > controller 패키지에서 ArticleController 새 컨트롤러 만들기

```html
1. 컨트롤러 선언
- @Controller 컨트롤러 선언

2. 메서드 생성 및 반환값 작성 
- 뷰 페이지를 보여주기 위한 newArticleForm() 메서드 추가 및 반환값 입력

3. URL 요청 접수 
- URL 요청 접수를 위한 @GetMapping("/articles/new") 입력 
```

### 3.2.3 폼 데이터 전송하기

제출 버튼을 누르면 아무런 일도 발생하지 않는다

왜 ?

<form> 태그를 입력할 때 필요한 두 가지 정보가 없기 때문에

1. 데이터를 어디로 보낼지 - action 속성
2. 데이터를 어떻게 보낼지 - method 속성

```html
1. form 태그에 정보 추가하기
- action 과 method 속성으로 설정
- action="/articles/create"
	: localhost:8080/articles/create 페이지로 폼 데이터를 보낸다는 말
- method="post"
```

### 3.2.4 폼 데이터 받기

<form> 태그에 속성 정보 설정했으니, 서버의 컨트롤러가 이 정보를 조합해 사용자가 전송한 폼 데이터를 받도록 하자

```html
1. 메서드 생성 및 반환값 작성
- Controller 에 createArticle() 메서드 추가
- 리턴 값 없음

2. URL 요청 접수
- 뷰 페이지에서 폼데이터를 post 방식으롤 전송 했기 때문에 컨트롤러에서 받을 때에도 @PostMapping 사용
- 뷰 페이지에서 전송한 주소와 동일하게 설정 @PostMapping("/articles/create")

```

### 3.2.5 DTO 만들기

```html
1. DTO 작성
- 새 패키지 만들기 
- com.example.firstproject 에 com.example.firstproject.dto 패키지 추가
- controller 와 같은 레벨에 dto 패키지 만들어짐

2. 자바 클래스 추가
- dto 패키지에 ArticleForm  클래스 입력

3. 입력 폼에 맞게 필드 선언
- 입력 폼엣 제목과 내용 전송하니 dto 필드 두개 선언
- title, content

4. 생성자 추가
- ArticleForm 클래스 내에 마우스 우클릭 > Generate > Constructor 선택
- title, content 선택 후 > ok > 자동으로 생성자 코드가 추가된다

5. 폼 데이터를 잘 받았는지 확인 하기 위해 toStirng() 추가
- ArticleForm() 메서드 내에 우클릭 > Generate > toString()
- title, content 선택 후 > ok > toStirng() 자동 추가된다 
```

### 3.2.6 폼 데이터를 DTO 에 담기

ArticleController 를 수정해서 폼 데이터를 DTO에 담도록 하자

```html
1. 폼 데이터를 DTO로 받기
- 폼에서 전송한 데이터를 createArticle() 매개변수로 받아오기
- DTO로 만든 클래스 이름에 맞게 ArticleForm 타입으로 매개변수 선언 
- 이때 ArticleForm dto 패키지가 자동으로 임포트된다

2. DTO 에 폼 데이터가 잘 담겼나 확인
- System.out.println() 으로 출력하기
- 출력문은 4장에서 로깅하는 방식으로 바꾼다
 
```

### 3.2.7 입력 폼과 DTO 필드 연결하기

DTO 필드에 폼 데이터가 들어가려면 new.mustache 입력 폼에 필드명을 지정해줘야한다

```html
1. 태그에 name="title" 추가

2. 태그에 name="content" 추가

3. 서버 재시작 

4. 인텔리제이 실행창 run 탭 확인 
```

```html
2024-09-22T19:45:04.422+09:00  INFO 2103 --- [           main] c.e.f.FirstprojectApplication            : Started FirstprojectApplication in 0.999 seconds (process running for 1.133)
2024-09-22T19:45:17.727+09:00  INFO 2103 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-22T19:45:17.727+09:00  INFO 2103 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-22T19:45:17.728+09:00  INFO 2103 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
ArticleForm{title='1323', content='123123'}
실행창 확인하면 이렇게 나오게 된다
```

### 정리

1. 뷰 페이지를 만들고 form 태그의 action 속성으로  어디에 보낼지 method 속성으로 데이터를 어떻게 보낼지 정의하기
2. 컨트롤러를 만들고 PostMapping 방식으로 URL 주소 연결
3. 전송받은 데이터를 담아둘 객체인 DTO 만들기
4. 컨트롤러에서 폼데이터를 전송받아 DTO 에 담기
